ktor {
    deployment {
        // Dinamikus portkezelés: Használja a $PORT környezeti változót (Render),
        // egyébként fallback 8080-ra (helyi fejlesztés)
        port = ${?PORT} : 8080
    }
    application {
        // Kérjük, ellenőrizze, hogy ez a modul neve helyes-e a projektjében!
        modules = [ com.example.ApplicationKt.module ]
    }
}

# -------------------------------------------------------------------------
# ADATBÁZIS KONFIGURÁCIÓ (Exposed + HikariCP)
# -------------------------------------------------------------------------
# Minden érzékeny adatot környezeti változókból (environment variables) olvasunk be.
# Ezt a hosting szolgáltatónál (pl. Render) kell beállítania!

database {
    # A JDBC URL, pl.: "jdbc:postgresql://host:port/dbname"
    jdbcUrl = ${?DB_URL}
    driverClassName = "org.postgresql.Driver"

    # Hitelesítő adatok
    user = ${?DB_USER}
    password = ${?DB_PASSWORD}

    # HikariCP beállítások
    poolSize = 10
    autoCommit = false
    transactionIsolation = "TRANSACTION_REPEATABLE_READ"
}